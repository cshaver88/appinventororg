<!DOCTYPE html>
<!-- saved from url=(0055)http://twitter.github.com/bootstrap/examples/fluid.html -->
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>AppInventor.org</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    
    <!-- Le styles -->

    <link href="../../assets/css/bootstrap.css" rel="stylesheet">
    <link href="../../assets/css/ai_styles.css" rel="stylesheet">
    <style type="text/css">
        body {
            padding-top: 60px;
            padding-bottom: 40px;
        }

        .sidebar-nav {
            padding: 9px 0;
        }
    </style>
    <link href="../../assets/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="http://twitter.github.com/bootstrap/assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144"
          href="http://twitter.github.com/bootstrap/assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114"
          href="http://twitter.github.com/bootstrap/assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72"
          href="http://twitter.github.com/bootstrap/assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed"
          href="http://twitter.github.com/bootstrap/assets/ico/apple-touch-icon-57-precomposed.png">
</head>

<body>

<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <a class="brand" href="/">AppInventor.org</a>

            <div class="nav-collapse">
                <ul class="nav">
                    <!-- <li class="active"><a href="index.html"><i class="icon-home icon-white"></i> Home</a></li> -->
                    <li><a href="#about">About</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>


            </div>
            <!--/.nav-collapse -->
        </div>
    </div>
</div>

<div class="container">

    <div class="span8">


        <div class="row-fluid">

            <div class="lead">
                <h1 style="font-size: 42px;">Admin Area</h1>

                <p style="font-size: 15px;">From here, you can add tutorials -- as "Apps" to the site, and populate them
                    with
                    steps and customization exercises.
                </p>
            </div>
		 <p><b>Instructions after adding or modifying app</b></p>
		 <ul>
  			<li>Flush the memcached in <a href="https://appengine.google.com/datastore/explorer?submitted=1&app_id=s~appinventororg&show_options=no&version_id=1.366706941235179009&kind=App&query=SELECT+*+FROM+Step" target="_blank">GAE dashboard</a> (at bottom, called "Flush Memcache"), or click <a href="/memcache_flush_all">Here</a></li>
  			<li>Make sure appId is not conflicted</li>
  			<li>Add corresponding handler in <b>app_controller.py</b>; e.g. ('/amazon-steps', NewAppRenderer)</li>
		</ul>

        </div>


        <div class="row-fluid">


            <div class="custom-border" style="margin-top: 20px;">

                <div class="row-fluid">


                    <div class="span12">

                        <div id="app_box">


                            <h2>AI1 currently on the site</h2>

                            <div class="thumbnail">

                                <div rows="20" class="input-xxlarge" id="app_listing"></div>

                                <br/>
                                <br/>

                            </div>

					 <h2>AI2 currently on the site</h2>

					 <div class="thumbnail">

                                <div rows="20" class="input-xxlarge" id="app_listing2"></div>

                                <br/>
                                <br/>

                            </div>

					



                            <br/>

{#                            These bring up modals#}
                            <form action="/DeleteApp" method="get">
							<a href="#add_app" role="button" class="btn btn-inverse btn-medium" data-toggle="modal" onclick="clear_app_form();">Add App</a>
                                    <a href="#add_app" role="button" id="mod_app_btn" class="btn btn-success btn-medium"
                                       data-toggle="modal">Mod App</a>
						    

						    <input class="input" id="del_app_name" type="hidden" name="del_app_name" value=""/>

                                    <input class="btn btn-danger btn-medium" type="submit" value="Delete App">
                            </form>

{#                            These redirect to other pages#}
                                <form action="/AddStepPage" method="get">
                                    <input class="input" id="add_step_app_name" type="hidden" name="add_step_app_name" value=""/>
                                    <button class="btn">Add Step</button>
                                </form>

                                <form action="/AddCustomPage" method="get">
                                    <input class="input" id="add_custom_app_name" type="hidden" name="add_custom_app_name"
                                           value=""/>
                                    <button class="btn">Add Custom</button>
                                </form>





                        </div>

                    </div>


                </div>



			 <h2>Web Tutorials currently on the site  {{ tutorials_listing}}  {{tutorials|length}}</h2>

			<div class="thumbnail">

                                <div rows="20" class="input-xxlarge" id="tutorials_listing"></div>

                                <br/>
                                <br/>

                 </div>

{#			  These bring up modals#}
                  <form action="/DeleteTutorial" method="get">
							<a href="#add_tutorial" role="button" class="btn btn-inverse btn-medium" data-toggle="modal" onclick="clear_tutorial_form();">Add Tutorial</a>
                                    <a href="#add_tutorial" role="button" id="mod_tutorial_btn" class="btn btn-success btn-medium"
                                       data-toggle="modal">Mod Tutorial</a>
						    

						    <input class="input" id="del_tutorial_name" type="hidden" name="del_tutorial_name" value=""/>

                                    <input class="btn btn-danger btn-medium" type="submit" value="Delete Tutorial">
                 </form>

{#               These redirect to other pages#}
                 <form action="/AddTutorialStepPage" method="get">
                                    <input class="input" id="add_step_tutorial_name" type="hidden" name="add_step_tutorial_name" value=""/>
                                    <button class="btn">Add Step</button>
                 </form>

                <div class="row-fluid">
                    &nbsp;
                </div>


            </div>


        </div>


        <div class="span6">


        </div>


        {# ADD_APP MODAL #}

        <div id="add_app" class="modal hide fade" tabindex="-1" role="dialog">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">×</button>
                <h3 id="myModalLabel">Add or Modify an App</h3>
            </div>

            <form action="/PostApp" method="post">

                <input class="input" id="modify_app_name" type="hidden" name="modify_app_name" value=""/>

                <div class="modal-body">

                    <div class="form-unit">
                        <strong>App Title</strong>

                        <p>

                        </p>
                        <input id="app_title" type="text" value="This is a test" name="title">
                    </div>


                    <div class="form-unit">
                        <strong>App ID</strong>

                        <p>
                            <small> (If any websites link to this tutorial, ensure that this field corresponds to the
                                link
                                on those sites. For example, if a site has a link to "appinventor.org/hellopurr" and you
                                are entering fields for the Hello Purr app, make sure this field == "hellopurr".)
                            </small>
                        </p>
                        <input id="add_name" type="text" name="appId">
                    </div>

                    <div class="form-unit">
                        <strong>App Number</strong>

                        <p>
                            <small> This number determines the order in which apps appear in the sidebar.
                                    Number 1 will appear first in the list.
                            </small>
                        </p>
                        <input id="app_number" type="text" name="appNumber">
                    </div>


                    <br/>

                    <div class="form-unit">
                        <strong>Hero Header</strong>

                        <p>
                            <small> (Should either be or include the name of the app. For example, "Build the Paint Pot
                                App".)
                            </small>
                        </p>
                        <input id="app_header" type="text" name="heroHeader">
                    </div>

                    <br/>

                    <div class="form-unit">
                        <strong>Hero Copy</strong>

                        <p>
                            <small> (Describes the app -- what it does and what you can learn from building it.)
                            </small>
                        </p>
                        <textarea id="app_copy" name="heroCopy" rows="4" cols="60">Type hero copy here.</textarea>
{#                        <input id="app_copy" type="text" name="heroCopy">#}
                    </div>

                    <br/>

			<div class="form-unit">
                        <strong>PDF Chapter</strong>

                        <p>
                            <small> (Specify whether there is a PDF chapter or not.)
                            </small>
                        </p>
			    
			    <input id = "app_pdfChapter_True" type="radio" name="pdfChapter" value="True">Yes<br>
			    <input id = "app_pdfChapter_False" type="radio" name="pdfChapter" value="False">No
			    
                        
                    </div>

                    <br/>

			  <div class="form-unit">
                        <strong>Web Chapter</strong>

                        <p>
                            <small> (Specify whether there is a Web tutorial chapter or not. Web Tutorial Link should be a relative link, like "/MoleMash2")
                            </small>
                        </p>
			    
			    <input id = "web_tutorial_True" type="radio" name="webTutorial" value="True" onclick="show_web_tutorial_link();">Yes<br>
			    <input id = "web_tutorial_False" type="radio" name="webTutorial" value="False" onclick="hide_web_tutorial_link();">No
			    <input id = "web_tutorial_link" type="text" name="webTutorialLink" value="" style="display:none;">

                        
                    </div>

                    <br/>

			  <div class="form-unit">
                        <strong>Conceptual Link</strong>

                        <p>
                            <small> (Specify whether there is a conceptual link or not.)
                            </small>
                        </p>
			    
			    <input id = "app_conceptualLink_True" type="radio" name="conceptualLink" value="True">Yes<br>
			    <input id = "app_conceptualLink_False" type="radio" name="conceptualLink" value="False">No
			    
                        
                    </div>

                    <br/>

			  <div class="form-unit">
                        <strong>Many Mold</strong>

                        <p>
                            <small> (manymold ID; leave it blank if there is no manymold for this app)
                            </small>
                        </p>
			    
			    <input id = "app_manyMold" type="text" name="manyMold"><br>
			   
			    
                        
                    </div>

                    <br/>

			  <div class="form-unit">
                        <strong>Version</strong>

                        <p>
                            <small> (App Inventor Version.)
                            </small>
                        </p>
			    
			    <input id = "app_version_1" type="radio" name="version" value="1">1<br>
			    <input id = "app_version_2" type="radio" name="version" value="2">2
			    
                        
                    </div>

			  <br/>

                </div>


                <div class="modal-footer">
                    <input class="btn btn-success btn-medium" type="submit" value="Submit"/>


                </div>

            </form>


        </div>




	{# ADD_Tutorial MODAL #}

        <div id="add_tutorial" class="modal hide fade" tabindex="-1" role="dialog">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">×</button>
                <h3 id="myModalLabel">Add or Modify a Tutorial</h3>
            </div>

            <form action="/PostTutorial" method="post">

                <input class="input" id="modify_tutorial_name" type="hidden" name="modify_tutorial_name" value=""/>

                <div class="modal-body">

                    <div class="form-unit">
                        <strong>Tutorial Title</strong>

                        <p>

                        </p>
                        <input id="tutorial_title" type="text" value="This is a test" name="tutorialTitle">
                    </div>


                    <div class="form-unit">
                        <strong>Tutorial ID</strong>

                        <p>
                            <small> (If any websites link to this tutorial, ensure that this field corresponds to the
                                link
                                on those sites. For example, if a site has a link to "appinventor.org/hellopurr" and you
                                are entering fields for the Hello Purr app, make sure this field == "hellopurr".)
                            </small>
                        </p>
                        <input id="add_tutorial_name" type="text" name="tutorialId">
                    </div>

                    <div class="form-unit">
                        <strong>Tutorial Number</strong>

                        <p>
                            <small> This number determines the order in which apps appear in the sidebar.
                                    Number 1 will appear first in the list.
                            </small>
                        </p>
                        <input id="tutorial_number" type="text" name="tutorialNumber">
                    </div>


                    <br/>

                    <div class="form-unit">
                        <strong>Hero Header</strong>

                        <p>
                            <small> (Should either be or include the name of the app. For example, "Build the Paint Pot
                                App".)
                            </small>
                        </p>
                        <input id="tutorial_header" type="text" name="tutorialHeroHeader">
                    </div>

                    <br/>

                    <div class="form-unit">
                        <strong>Hero Copy</strong>

                        <p>
                            <small> (Describes the app -- what it does and what you can learn from building it.)
                            </small>
                        </p>
                        <textarea id="tutorial_copy" name="tutorialHeroCopy" rows="4" cols="60">Type hero copy here.</textarea>
                    </div>

                    <br/>

			
			 
			  
                </div>


                <div class="modal-footer">
                    <input class="btn btn-success btn-medium" type="submit" value="Submit"/>


                </div>

            </form>


        </div>








    </div>


</div>
<!-- /container -->

<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="../assets/js/jquery.js"></script>
<script src="../assets/js/bootstrap-transition.js"></script>
<script src="../assets/js/bootstrap-alert.js"></script>
<script src="../assets/js/bootstrap-modal.js"></script>
<script src="../assets/js/bootstrap-dropdown.js"></script>
<script src="../assets/js/bootstrap-scrollspy.js"></script>
<script src="../assets/js/bootstrap-tab.js"></script>
<script src="../assets/js/bootstrap-tooltip.js"></script>
<script src="../assets/js/bootstrap-popover.js"></script>
<script src="../assets/js/bootstrap-button.js"></script>
<script src="../assets/js/bootstrap-collapse.js"></script>
<script src="../assets/js/bootstrap-carousel.js"></script>
<script src="../assets/js/bootstrap-typeahead.js"></script>

<script type="text/javascript">  // main scripts

function get_app_data(element){



}

function clear_app_form(){
	$("#app_title").val("");
      $("#add_name").val("");
      $("#app_number").val("");
      $("#app_header").val("");
      $("#app_copy").val("");

	$('.highlight').removeClass('highlight');
	$("#mod_app_btn").attr("disabled", true);//unclickable now
}

function clear_tutorial_form(){
	$("#tutorial_title").val("");
      $("#tutorial_name").val("");
      $("#tutorial_number").val("");
      $("#tutorial_header").val("");
      $("#tutorial_copy").val("");
      $("#add_tutorial_name").val("");
 	

	
	$('.highlight').removeClass('highlight');
	$("#mod_tutorial_btn").attr("disabled", true);//unclickable now
}


function hide_web_tutorial_link(){
	var e = document.getElementById("web_tutorial_link");
	e.style.display = 'none';
}

function show_web_tutorial_link(){
	var e = document.getElementById("web_tutorial_link");
	e.style.display = 'block';
}



$(document).ready(function () {

    var header = "";
    var copy = "";
    var number = 0;
    var title = "";
    var id = "";
    $("#mod_app_btn").attr("disabled", true); //init as disable
    $("#mod_tutorial_btn").attr("disabled", true);//unclickable now

    var app_listing = "{{ app_listing }}";
    var app_listing2 = "{{ app_listing2 }}";
    var tutorials_listing = "{{ tutorials_listing}}";


    var total_text_elem = '';

    var lines = app_listing.split("|");
    $.each(lines, function (i, item) {
        console.log(item);
        total_text_elem += '<div class="appname" data-appname="' + item + '">' + '<a href="#">' + item + '</a>' + '</div>';
    });
    $("#app_listing").html(total_text_elem);


    var total_text_elem2 = '';

    lines = app_listing2.split("|");
    $.each(lines, function (i, item) {
        console.log(item);
        total_text_elem2 += '<div class="appname" data-appname="' + item + '">' + '<a href="#">' + item + '</a>' + '</div>';
    });
    $("#app_listing2").html(total_text_elem2);


    var total_text_elem3 = '';

    lines = tutorials_listing.split("|");
    $.each(lines, function (i, item) {
        console.log(item);
        total_text_elem3 +='<div class="tutorialname" data-tutorialname="' + item + '">' + '<a href="#">' + item + '</a>' + '</div>';
    });
    $("#tutorials_listing").html(total_text_elem3 );
    
    
     $(".tutorialname").click(function () {
		$('.highlight').removeClass('highlight');
        	$(this).addClass('highlight');
		$("#mod_tutorial_btn").attr("disabled", false); //app selected, clickable now

		var path = $(this).data('tutorialname');

		$.getJSON("/get_tutorial_data?tutorial=" + path,
            function (data) {

                console.log("calling get_app_data()");

                $.each(data, function(i, item) {
                    console.log("item is " + item);

                    if (i == "heroHeader") {
                        $("#tutorial_header").val(item);
                    }

                    if (i == "heroCopy") {
                        $("#tutorial_copy").val(item);
                    }

                    if (i == "number") {
                        $("#tutorial_number").val(item);
                    }

                    if (i == "title") {
                        $("#tutorial_title").val(item);
                    }

			  if (i == "tutorialId") {
                        $("#add_tutorial_name").val(item);
                    }

	

	
		

                });

            });

		$("#del_tutorial_name").val(path);
        	$("#add_step_tutorial_name").val(path);
        	$("#modify_tutorial_name").val(path);
        	$("#add_custom_tutorial_name").val(path);


  	});




    $(".appname").click(function () {
        $('.highlight').removeClass('highlight');
        $(this).addClass('highlight');
	  $("#mod_app_btn").attr("disabled", false); //app selected, clickable now
        var path = $(this).data('appname');

        console.log("hello, world!");

{#        get app data#}

        $.getJSON("/get_app_data?app=" + path,
            function (data) {

                console.log("calling get_app_data()");

                $.each(data, function(i, item) {
                    console.log("item is " + item);

                    if (i == "heroHeader") {
                        $("#app_header").val(item);
                    }

                    if (i == "heroCopy") {
                        $("#app_copy").val(item);
                    }

                    if (i == "number") {
                        $("#app_number").val(item);
                    }

                    if (i == "title") {
                        $("#app_title").val(item);
                    }
			  if (i == "pdfChapter") {
				if(item == true){
					document.getElementById('app_pdfChapter_True').checked = true;
				}else{
					document.getElementById('app_pdfChapter_False').checked = true;

				}  
                    }
			  if (i == "webTutorial") {
				if(item == true){
					document.getElementById('web_tutorial_True').checked = true;
					show_web_tutorial_link();
				}else{
					document.getElementById('web_tutorial_False').checked = true;
					hide_web_tutorial_link();
				}  
                    }

			  if (i == "webTutorialLink") {
				document.getElementById('web_tutorial_link').value = item;
			  }

			  if (i == "conceptualLink") {
				if(item == true){
					document.getElementById('app_conceptualLink_True').checked = true;
				}else{
					document.getElementById('app_conceptualLink_False').checked = true;

				}  
                    }
			  if (i == "manyMold") {
				if(item == null){
					$("#app_manyMold").val("");
				}else{
					$("#app_manyMold").val(item);
				}  
                    }
			  
			  if (i == "version") {
				if(item == "1"){
					document.getElementById('app_version_1').checked = true;
				}else if(item == "2"){
					document.getElementById('app_version_2').checked = true;

				}  
                    }

                });

            });

        console.log("path is " + path);

//        var original_color = this.style.backgroundColor;
//        this.style.backgroundColor = "#FDFF47";
//        $("appname").effect("highlight", {color:"#669966"}, 3000);

        $("#app_title").val(title);
        $("#add_name").val(path);
        $("#app_number").val(number);
        $("#app_header").val(header);
        $("#app_copy").val(copy);


        $("#del_app_name").val(path);
        $("#add_step_app_name").val(path);
        $("#modify_app_name").val(path);
        $("#add_custom_app_name").val(path);


    });
});


</script>

</body>
</html>
